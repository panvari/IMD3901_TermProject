<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <!--GUI Library-->
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <!--Environment extension-->
    <title>Servant Quarters</title>

</head>

<body>
    <a-scene physics="debug: false">

        <a-assets>
            <!-- Images -->
            <img id="gemImage" src="./assets/images/gem.png">
            <img id="servantsInstructions" src="./assets/images/laundry_desktopInstructions.png">
            <img id="kingMessage" src="./assets/images/kingMessage_05.png">


            <!-- Models -->
            <a-asset-item id="gem" src="./assets/models/gem.obj"></a-asset-item>
            <a-asset-item id="weaponsRoom" src="./assets/models/GreatHall.glb"></a-asset-item>
            <a-asset-item id="door" src="./assets/models/door.glb"></a-asset-item>
            <a-asset-item id="chandelier" src="./assets/models/Chandelier.glb"></a-asset-item>
            <a-asset-item id="table" src="./assets/models/shortTableServants.glb"></a-asset-item>
            <a-asset-item id="stool" src="./assets/models/stoolServants.glb"></a-asset-item>
            <a-asset-item id="bed" src="./assets/models/ServantBed.glb"></a-asset-item>
            <a-asset-item id="wall" src="./assets/models/Walls.glb"></a-asset-item>
            <a-asset-item id="candle" src="./assets/models/candle.glb"></a-asset-item>
            <a-asset-item id="shelf" src="./assets/models/shelf.glb"></a-asset-item>

        </a-assets>

        <a-entity id="cameraRig" player_position location movement-controls kinematic-body>
            <a-entity camera look-controls position="0 2.8 0">
                <a-cursor></a-cursor>

                <a-gui-label id="playerLocation" width="1.5" height="0.3" font-size="4rem" padding="1rem 2rem" position="3 1.8 -2.5" value="Servant Quarters">
                </a-gui-label>

                <a-entity visible="false" id="servantInstructions" position="-2.2 -0.5 -2.5">
                    <a-image src="#servantsInstructions" width="4" height=" 3"></a-image>
                </a-entity>

                <a-entity visible="false" id="kingMessage_05" position="2.2 -0.5 -2.5">
                    <a-image src="#kingMessage" width="4" height=" 1.3"></a-image>
                </a-entity>

                <a-image class="gem" id="gem1" src="#gemImage" width="0.3" height="0.5" position="-3.5 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem2" src="#gemImage" width="0.3" height="0.5" position="-3.1 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem3" src="#gemImage" width="0.3" height="0.5" position="-2.7 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem4" src="#gemImage" width="0.3" height="0.5" position="-2.3 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem5" src="#gemImage" width="0.3" height="0.5" position="-1.9 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem6" src="#gemImage" width="0.3" height="0.5" position="-1.5 1.8 -2.5" opacity="0.4"></a-image>
            </a-entity>
        </a-entity>

        <!-- Gem -->
        <a-obj-model servantsgem id="servantsGem" material="color: green" src="#gem" position="2 -1 -18" scale="0.1 0.1 0.1"></a-obj-model>

        <!-- Floor -->
        <a-plane static-body material="color: grey" width="1000" height="1000" rotation="-90 0 0" position="0 -0.01 0"></a-plane>

        <!-- Models -->
        <a-entity gltf-model="#weaponsRoom" scale="1.676 2 2" position="0 0 -18.923" rotation="0 90 0"></a-entity>

        <a-entity gltf-model="#wall" scale="3.254 3.254 3.254" position="0 0.059 -6.045" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#wall" scale="3.254 3.254 3.254" position="0 8.299 -6.045" rotation="0 -180.000 -180.000"></a-entity>

        <a-entity onclick="changeScene('great_hall')" gltf-model="#door" scale="1.4 1.4 1.4" position="0 0 2.2" rotation="0 180 0"></a-entity>

        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 -12.52" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 -8.232" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 -3.91" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 -17.06" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 -21.780" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="9.357 0 .540" rotation="0, 180, 0"></a-entity>

        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 -12.52" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 -8.232" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 -3.91" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 -17.06" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 -21.780" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#bed" scale="1 1 1" position="-9.357 0 .540" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 .540" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 -3.91" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 -8.232" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 -12.52" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 -17.06" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="-11.899 -2.291 -21.780" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 .540" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 -3.91" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 -8.232" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 -12.52" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 -17.06" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="0.553 1.2 1.2" position="11.899 -2.291 -21.780" rotation="0, -90, 0"></a-entity>

        <a-entity gltf-model="#table" scale=".018 .018 0.018" position="-1.040 0 -28.132" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#table" scale=".018 .018 0.018" position="1.649 0 -28.132" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="-3.352 0 -28.132" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="4.132 0 -28.132" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="-1.040 0 -25.983" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="1.649 0 -25.983" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="-1.040 0 -30.483" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#stool" scale=".025 .025 .025" position="1.649 0 -30.483" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 .540" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 -3.91" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 -8.232" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 -12.52" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 -17.06" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="-11.778 2.889 -21.780" rotation="0 0 0"></a-entity>

        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 .540" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 -3.91" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 -8.232" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 -12.52" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 -17.06" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#candle" scale=".3 .3 .3" position="11.778 2.889 -21.780" rotation="0 0 0"></a-entity>

        <!-- Lighting -->
        <a-light type="point" position="-11.778 2.889 9.340" intensity=".35"></a-light>
        <a-light type="point" position="-11.778 2.889 -8.260" intensity=".35"></a-light>

        <a-light type="point" position="11.778 2.889 9.340" intensity=".35"></a-light>
        <a-light type="point" position="11.778 2.889 -8.260" intensity=".35"></a-light>

        <a-entity text="value: Great Hall; align: center; color:#785236;" position="0 4.684 1.762" scale="7 7 1" rotation="0 180 0"></a-entity>

        <a-box static-body visible="false" position="0 3 3" scale="27 11 1"></a-box>
        <a-box static-body visible="false" position="0 3 -33" scale="27 11 1"></a-box>
        <a-box static-body visible="false" position="13 3 -13.5" scale="0.7 17 50"></a-box>
        <a-box static-body visible="false" position="-13 3 -13.5" scale="0.7 17 50"></a-box>
        <a-box static-body visible="false" position="0.3 2.3 -28.2" scale="4.6 3.7 2.2"></a-box>
        <a-box static-body visible="false" position="9.5 2.4 -10.5" scale="5.9 5.6 23.65"></a-box>
        <a-box static-body visible="false" position="-9.5 2.4 -10.5" scale="5.9 5.6 23.65"></a-box>

    </a-scene>

    <script src="./js/scoreSystem.js"></script>
    <script src="./js/gemItemControl.js"></script>
    <script src="./js/message_05_controller.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        function changeScene(val) {
            if (val == 'great_hall') {
                socket.emit('great_hall') //calls server method
            }
        };

        let socket = io();
        //default connect event
        socket.on('connect', function() {
            console.log("connected!");
        });

        socket.on('pageLocationQuery', (data) => {
            socket.emit('mobileLoadServant');
        });

        socket.on('great_hall', function(data) {
            window.location.replace('greathall') //Call
        });
    </script>
</body>

</html>