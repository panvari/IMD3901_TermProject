<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
    <!--GUI Library-->
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <!--Environment extension-->
    <title>Weapons Room</title>

</head>

<body>
    <a-scene physics="debug: false">

        <a-assets>
            <!-- Images -->
            <img id="gemImage" src="./assets/images/gem.png">

            <img id="armourGame" src="./assets/images/armourGame.png">

            <!-- Models -->
            <a-asset-item id="weaponsRoom" src="./assets/models/GreatHall.glb"></a-asset-item>
            <a-asset-item id="door" src="./assets/models/door.glb"></a-asset-item>
            <a-asset-item id="chandelier" src="./assets/models/Chandelier.glb"></a-asset-item>
            <a-asset-item id="shortTable" src="./assets/models/shortTable.glb"></a-asset-item>
            <a-asset-item id="shelf" src="./assets/models/shelf.glb"></a-asset-item>
            <a-asset-item id="sword" src="./assets/models/sword.glb"></a-asset-item>
            <a-asset-item id="spear" src="./assets/models/spear.glb"></a-asset-item>
            <a-asset-item id="mace" src="./assets/models/mace.glb"></a-asset-item>
            <a-asset-item id="bow" src="./assets/models/bow.glb"></a-asset-item>
            <a-asset-item id="arrow" src="./assets/models/arrow.glb"></a-asset-item>
            <a-asset-item id="helmet" src="./assets/models/Helmet.glb"></a-asset-item>
            <a-asset-item id="chestPlate" src="./assets/models/Chestplate.glb"></a-asset-item>
            <a-asset-item id="boot" src="./assets/models/Boot.glb"></a-asset-item>
            <a-asset-item id="gauntlet" src="./assets/models/Gauntlet.glb"></a-asset-item>
            <a-asset-item id="wall" src="./assets/models/Walls.glb"></a-asset-item>

            <a-asset-item id="gem" src="./assets/models/gem.obj"></a-asset-item>

        </a-assets>

        <a-entity id="cameraRig" player_position location movement-controls kinematic-body>
            <a-entity camera look-controls position="0 2.8 0">
                <a-cursor></a-cursor>

                <a-gui-label id="playerLocation" width="1.5" height="0.3" font-size="4rem" padding="1rem 2rem" position="3 1.8 -2.5" value="Weapons Room">
                </a-gui-label>

                <!-- <a-entity visible="false" id="popUp" geometry="primitive: plane; width: 3; height: 3.5" material="color: white" text=" width: 2.8; align: left; font: https://cdn.aframe.io/fonts/Exo2SemiBold.fnt; color: white; baseline: bottom; letterSpacing: 3; lineHeight:40; value: Lorem ipsum dolor, sit amet consectetur adipisicing elit. Dolorem iste distinctio facere error in? Natus dolorum modi, aspernatur amet praesentium eveniet, ea ex aliquam voluptatem repellat nesciunt minima non autem, labore facilis perspiciatis quis. Eius, tempore accusamus! Quos, ipsa eos aliquam vero architecto quae eligendi voluptate ex corrupti mollitia ducimus. "
                    position="-2.7 -0.5 -2.5">
                </a-entity> -->
                <a-entity visible="false" id="armourInstructions" position="-2.2 -0.5 -2.5">
                    <a-image src="#armourGame" width="4" height=" 3"></a-image>
                </a-entity>

                <a-image class="gem" id="gem1" src="#gemImage" width="0.3" height="0.5" position="-3.5 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem2" src="#gemImage" width="0.3" height="0.5" position="-3.1 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem3" src="#gemImage" width="0.3" height="0.5" position="-2.7 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem4" src="#gemImage" width="0.3" height="0.5" position="-2.3 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem5" src="#gemImage" width="0.3" height="0.5" position="-1.9 1.8 -2.5" opacity="0.4"></a-image>
                <a-image class="gem" id="gem6" src="#gemImage" width="0.3" height="0.5" position="-1.5 1.8 -2.5" opacity="0.4"></a-image>
            </a-entity>
        </a-entity>

        <!-- Gem -->
        <a-obj-model weaponsgem id="weaponRoomGem" material="color: green" src="#gem" rotation="-180 -47 -180" position="9 0 -0.6" scale="0.1 0.1 0.1"></a-obj-model>

        <!-- Lighting -->
        <a-light type="point" position="-2 3 8"></a-light>
        <a-light type="point" position="-2 3 -16"></a-light>

        <!-- Floor -->
        <a-plane static-body material="color: grey" width="1000" height="1000" rotation="-90 0 0" position="0 -0.01 0"></a-plane>

        <!-- Models -->
        <a-entity gltf-model="#weaponsRoom" scale="1 2 2" position="0 0 -10.583" rotation="0 90 0"></a-entity>

        <a-entity gltf-model="#wall" scale="2.525 2.525 2.525" position="0 0.059 0" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#wall" scale="2.525 2.525 2.525" position="0 12.887 0" rotation="0 -180.000 -180.000"></a-entity>

        <a-entity onclick="changeScene('great_hall')" gltf-model="#door" scale="1.4 1.4 1.4" position="0 0 2.2" rotation="0 180 0"></a-entity>

        <a-entity gltf-model="#chandelier" scale=".3 0.649 .3" position="0 9.929 -8.8" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 -3.20 -2.72" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 -1.2 -2.72" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 1.8 -2.72" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 -3.20 -13.749" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 -1.2 -13.749" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="-11.899 1.8 -13.749" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 -3.20 -2.72" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 -1.2 -2.72" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 1.8 -2.72" rotation="0, -90, 0"></a-entity>

        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 -3.20 -13.749" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 -1.2 -13.749" rotation="0, -90, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1.2 1.2 1.2" position="11.899 1.8 -13.749" rotation="0, -90, 0"></a-entity>

        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 2.185 -2.803" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 2.185 -4.552" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 2.185 -.689" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 4.170 -2.803" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 4.170 -4.552" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 4.170 -.689" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 7.145 -2.803" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 7.145 -4.552" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#helmet" scale=".12 .12 .12" position="-12.091 7.145 -.689" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 1.832 -13.769" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 1.832 -15.418" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 1.832 -11.877" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 3.837 -13.769" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 3.837 -15.418" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 3.837 -11.877" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 6.759 -13.769" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 6.759 -15.418" rotation="0, 90, 0"></a-entity>
        <a-entity gltf-model="#chestPlate" scale=".27 .27 .27" position="-12.091 6.759 -11.877" rotation="0, 90, 0"></a-entity>

        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -16.002" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -15.361" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -14.202" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -13.482" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -11.516" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 2.1 -12.163" rotation="0, 180, 0"></a-entity>

        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -16.002" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -15.361" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -14.202" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -13.482" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -11.516" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 4.062 -12.163" rotation="0, 180, 0"></a-entity>

        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -16.002" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -15.361" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -14.202" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -13.482" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -11.516" rotation="0, 180, 0"></a-entity>
        <a-entity gltf-model="#boot" scale=".36 .36 .36" position="12.091 6.996 -12.163" rotation="0, 180, 0"></a-entity>

        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 3.804 -5.105" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 3.804 -4.238" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 3.804 -3.16" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 3.804 -2.31" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 3.804 -1.306" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 3.804 -.452" rotation="0, 90, 180"></a-entity>

        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 5.779 -5.105" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 5.779 -4.238" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 5.779 -3.16" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 5.779 -2.31" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 5.779 -1.306" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 5.779 -.452" rotation="0, 90, 180"></a-entity>

        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 8.792 -5.105" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 8.792 -4.238" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 8.792 -3.16" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 8.792 -2.31" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale=".2 .16 .2" position="12.091 8.792 -1.306" rotation="0, 90, 180"></a-entity>
        <a-entity gltf-model="#gauntlet" scale="-.2 .16 .2" position="12.091 8.792 -.452" rotation="0, 90, 180"></a-entity>

        <a-entity gltf-model="#shelf" scale="1 1 1" position="0 0.335 -18.506" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1 1 1" position="6.336 -1.109 -18.506" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#shelf" scale="1 1 1" position="-6.336 -1.109 -18.506" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#sword" scale="1.325 1.325 1.325" position="0 6.416 -18.113" rotation="0, 0, 180"></a-entity>
        <a-entity gltf-model="#sword" scale="1.325 1.325 1.325" position="1 6.416 -18.113" rotation="0, 0, 180"></a-entity>
        <a-entity gltf-model="#sword" scale="1.325 1.325 1.325" position="2 6.416 -18.113" rotation="0, 0, 180"></a-entity>
        <a-entity gltf-model="#sword" scale="1.325 1.325 1.325" position="-1 6.416 -18.113" rotation="0, 0, 180"></a-entity>
        <a-entity gltf-model="#sword" scale="1.325 1.325 1.325" position="-2 6.416 -18.113" rotation="0, 0, 180"></a-entity>

        <a-entity gltf-model="#mace" scale=".5 .5 .5" position="-6.375 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#mace" scale=".5 .5 .5" position="-5.139 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#mace" scale=".5 .5 .5" position="-7.652 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#mace" scale=".5 .5 .5" position="-8.841 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#mace" scale=".5 .5 .5" position="-3.872 0.672 -18.103" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#spear" scale="1.091 1.091 1.091" position="6.375 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#spear" scale="1.091 1.091 1.091" position="5.139 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#spear" scale="1.091 1.091 1.091" position="7.652 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#spear" scale="1.091 1.091 1.091" position="8.841 0.672 -18.103" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#spear" scale="1.091 1.091 1.091" position="3.872 0.672 -18.103" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#shortTable" scale=".018 .018 0.018" position="-5.999 0 -8.8" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#shortTable" scale=".018 .018 0.018" position="-3.369 0 -8.8" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#shortTable" scale=".018 .018 0.018" position="5.999 0 -8.8" rotation="0, 0, 0"></a-entity>
        <a-entity gltf-model="#shortTable" scale=".018 .018 0.018" position="3.369 0 -8.8" rotation="0, 0, 0"></a-entity>

        <a-entity gltf-model="#bow" scale="0.544 0.427 0.544" position="-8.639 1.674 -8.378" rotation="90, 90, 0"></a-entity>
        <a-entity gltf-model="#bow" scale="0.544 0.427 0.544" position="-8.639 1.674 -9.603" rotation="90, 90, 0"></a-entity>

        <a-entity gltf-model="#bow" scale="0.544 0.427 0.544" position="0.751 1.674 -8.378" rotation="90, 90, 0"></a-entity>
        <a-entity gltf-model="#bow" scale="0.544 0.427 0.544" position="0.751 1.674 -9.603" rotation="90, 90, 0"></a-entity>

        <a-entity text="value: Great Hall; align: center; color:#785236;" position="0 4.684 1.762" scale="7 7 1" rotation="0 180 0"></a-entity>

        <!-- Physics -->
        <a-box static-body visible="false" position="4.7 1.3 -8.5" scale="5.2 3.8 2.5"></a-box>
        <a-box static-body visible="false" position="-4.7 1.3 -8.5" scale="5.2 3.8 2.5"></a-box>
        <a-box static-body visible="false" position="0.813 4.75 2.5" scale="33 12 0.6"></a-box>
        <a-box static-body visible="false" position="0.813 4.75 -18" scale="33 12 0.6"></a-box>
        <a-box static-body visible="false" position="13.1 4.7 -8" scale="0.7 12 25"></a-box>
        <a-box static-body visible="false" position="-13.1 4.7 -8" scale="0.7 12 25"></a-box>

    </a-scene>

    <script src="./js/scoreSystem.js"></script>
    <script src="./js/gemItemControl.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        function changeScene(val) {
            if (val == "great_hall") {
                socket.emit('great_hall') //calls server method
            }
        };

        let socket = io();
        //default connect event
        socket.on('connect', function() {
            console.log("connected!");
        });

        socket.on('great_hall', function(data) {
            window.location.replace('greathall') //Call
        });
    </script>
</body>

</html>