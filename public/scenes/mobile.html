<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <link href="../css/mobileStyle.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet"> 

        <script src="/socket.io/socket.io.js"></script> <!-- Sockets -->

            <!-- Socket Script -->

            <script>

                let socket = io(); 
                //default connect event
                socket.on('connect', function() {
                    console.log("connected!");
                });
    
                socket.on('launch_minigame_1', function(data) {
                    window.location.replace('/armourMini')
                });
    
                socket.on('launch_minigame_2', function(data) {
                    window.location.replace('/tapestryMini')
                });

                socket.on('scene_2', function(data) {
                    document.getElementById("castleEntrance").setAttribute("style", "display:block")
                    document.getElementById("different").setAttribute("style", "display:none")
                    document.getElementById("roomTitle").innerHTML = "Great Hall";

                });
                socket.on('scene_3', function(data) {
                    document.getElementById("castleEntrance").setAttribute("style", "display:none")
                    document.getElementById("different").setAttribute("style", "display:block")
                    document.getElementById("roomTitle").innerHTML = "Throne Room";

                });

                let gem1 = document.querySelector('#gem1')
                let gem2 = document.querySelector('#gem2')

                setInterval((data) => {
                    if (sessionStorage.getItem('gem1Collected') === 'true') {
                        gem1.setAttribute('opacity', '1');
                    }
                    if (sessionStorage.getItem('gem2Collected') === 'true') {
                        gem2.setAttribute('opacity', '1');
                        gemItem2.setAttribute('material', 'color', 'red');
                    }

                }, 1000);

                // socket.on('gem1', function(data){
                //     document.getElementById("gem1").setAttribute("opacity", "1");
                // });

                // socket.on('gem2', function(data){
                //     document.getElementById("gem2").setAttribute("opacity", "1");
                // });
    
        </script>

        <title>Castle Quest</title>
    </head>
    <body>
        <div id = "gems">
            <img class = "gem" id="gem1" src="./assets/images/gem.png" width = 30>
            <img class = "gem" id="gem2" src="./assets/images/gem.png" width = 30>
            <img class = "gem" id="gem3" src="./assets/images/gem.png" width = 30>
            <img class = "gem" id="gem4" src="./assets/images/gem.png" width = 30>
            <img class = "gem" id="gem5" src="./assets/images/gem.png" width = 30>
            <img class = "gem" id="gem6" src="./assets/images/gem.png" width = 30>
        </div>
        

        <h1 id = roomTitle>Courtyard</h1>

<!-- TEXT ABOUT EACH ROOM -->
        <div id = "roomText">
            <p id = "castleEntrance" class = "roomText" style = display:none;>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris semper nisi a lorem posuere tincidunt. 
                Vestibulum facilisis varius fringilla. Vivamus metus lacus, sodales ac rhoncus id, sodales nec arcu.
            </p>
            <p id = "different" class = "roomText" style = display:block>
                Vestibulum interdum, risus in rhoncus dignissim, felis ligula tempus mauris, posuere commodo elit turpis tincidunt tortor. 
                Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.
            </p>
        </div>

<!-- IMAGES FOR EACH ROOM -->
        <div id = "roomImages">
            <img class = "room" id = "courtyard" src = "./assets/images/courtyard.png" width = 300px>
        </div>

<!-- KING'S QUOTES POPUPS -->
        <div id = kingPopups>
            <img id = "kingIcon" src = "../assets/images/king.png" width = 100px>
            <span class = "popup" id = "gameStart">
                Finally, you’re here! My advisors tell me that you will be able to help. 
                Somehow, I’ve lost all the gems on my crown, and I believe they may be scattered around the castle. 
                Perhaps they fell off while doing my rounds through the castle yesterday. Look around anywhere you need to inside, 
                I have granted you access everywhere, and please, help me find my gems!
            </span>

            <span class = "popup" id = "greatHall">
                Welcome to my castle! Perhaps leading you through the events that occured yesterday will help you locate the missing gems? 
                Well, to begin, I always start the day by checking in on the Guard’s Room and Weapons Room to ensure that the castle is safe 
                and properly guarded.
            </span>

            <span class = "popup" id = "guardRoom">
                Amazing, you found one of the gems! My advisors were right about you after all. Now, if I can recall correctly, 
                after making sure that the castle would be safe I started feeling really hungry, so I went to make sure my meal 
                was being prepared.
            </span>

            <span class = "popup" id = "pantry">
                Great work, you found another gem! Now let me see, after I ate, I believe I went to check on the servants to 
                make sure everything was in order.
            </span>

            <span class = "popup" id = "servantsQuarters">
                Excellent work, you’re halfway there! After I checked on the servants, 
                I decided to spend some time outdoors in the courtyard to get some fresh air.
            </span>

            <span class = "popup" id = "innerCourtyard">
                Now let me see, after I spent some time in the courtyard I decided to climb the watchtower so that I could view my kingdom.
            </span>

            <span class = "popup" id = "tower">
                Good job, you found another one of the missing gems! After admiring the view of my kingdom, 
                it was time for me to train. I spent hours outside in the training area of the courtyard, 
                perhaps I lost a gem there?
            </span>
            
            <span class = "popup" id = "trainingArea">
                Amazing, you found another gem! Once I was done training, I was feeling very tired, 
                so I decided to retire to my great chambers for a while to get some rest.
            </span>

            <span class = "popup" id ="greatChambers">
                Well, I guess I didn’t lose a gem here. Now let me think, after some rest I ended 
                the day in the throne room to oversee kingdom activities.
            </span>

            <span class = "popup" id = "throneRoomFinal">
                Fantastic work, you found all the missing gems! Thank you so much for all your help and 
                I hope you learned a bit about my castle along the way.
            </span>
        </div>

    </body>
</html>